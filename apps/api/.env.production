# apps/api/.env.production
# Nakksha Consulting Platform - Production Environment Configuration
# ðŸš¨ CRITICAL: Never commit this file with actual values!

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
NODE_ENV=production
PORT=8000
API_URL=https://api.yourdomain.com
FRONTEND_URL=https://naksha-teal.vercel.app/

# ============================================================================
# DATABASE CONFIGURATION (Neon PostgreSQL - Production)
# ============================================================================
DATABASE_URL="postgresql://username:password@ep-xxx.us-east-1.aws.neon.tech/nakksha_prod?sslmode=require"
DATABASE_CONNECTION_LIMIT=20
DATABASE_TIMEOUT=30000

# ============================================================================
# REDIS CONFIGURATION (Upstash - Production)
# ============================================================================
REDIS_URL="redis://default:xxx@xxx.upstash.io:6379"
REDIS_SESSION_TTL=86400
REDIS_CACHE_TTL=3600

# ============================================================================
# JWT AUTHENTICATION (Use strong secrets in production)
# ============================================================================
JWT_SECRET="your-production-jwt-secret-must-be-64-characters-long-and-secure"
JWT_REFRESH_SECRET="your-production-refresh-secret-must-be-64-characters-long"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# ============================================================================
# EMAIL SERVICE CONFIGURATION (Resend - Production)
# ============================================================================
RESEND_API_KEY="re_live_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"
FROM_EMAIL="noreply@yourdomain.com"
FROM_NAME="Nakksha Platform"
SUPPORT_EMAIL="support@yourdomain.com"

EMAIL_VERIFICATION_URL="https://yourdomain.com/verify-email"
PASSWORD_RESET_URL="https://yourdomain.com/reset-password"

# ============================================================================
# FILE UPLOAD CONFIGURATION (Cloudinary - Production)
# ============================================================================
CLOUDINARY_CLOUD_NAME="your-production-cloud-name"
CLOUDINARY_API_KEY="your-production-api-key"
CLOUDINARY_API_SECRET="your-production-api-secret"

MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/webp,application/pdf"

# ============================================================================
# PAYMENT GATEWAY (Razorpay - Live)
# ============================================================================
RAZORPAY_KEY_ID="rzp_live_xxxxxxxxxxxx"
RAZORPAY_KEY_SECRET="your-live-razorpay-secret"

PAYMENT_SUCCESS_URL="https://yourdomain.com/payment/success"
PAYMENT_FAILURE_URL="https://yourdomain.com/payment/failure"
WEBHOOK_SECRET="your-production-webhook-secret"

# ============================================================================
# SECURITY CONFIGURATION (Production)
# ============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

CORS_ORIGIN="https://yourdomain.com"
CORS_CREDENTIALS=true

SESSION_SECURE=true
SESSION_SAME_SITE="strict"
COOKIE_DOMAIN=".yourdomain.com"

# ============================================================================
# MONITORING & LOGGING (Production)
# ============================================================================
LOG_LEVEL="warn"
LOG_FORMAT="combined"

# Sentry for error tracking
SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"
SENTRY_ENVIRONMENT="production"

# ============================================================================
# BACKGROUND JOBS (Production)
# ============================================================================
BULL_REDIS_HOST="xxx.upstash.io"
BULL_REDIS_PORT=6379
BULL_REDIS_PASSWORD="your-upstash-password"

JOB_MAX_ATTEMPTS=3
JOB_BACKOFF_DELAY=10000

# ============================================================================
# SOCKET.IO (Production)
# ============================================================================
SOCKET_CORS_ORIGIN="https://yourdomain.com"
SOCKET_PATH="/socket.io"

# ============================================================================
# BUSINESS CONFIGURATION
# ============================================================================
ADMIN_APPROVAL_REQUIRED=true
AUTO_APPROVE_CONSULTANTS=false

DEFAULT_SESSION_DURATION=60
MAX_SESSION_DURATION=180
SESSION_BUFFER_TIME=15

QUOTATION_VALIDITY_DAYS=7
MAX_QUOTATION_ITEMS=10

FREE_PLAN_SESSION_LIMIT=5
PRO_PLAN_MONTHLY_PRICE=2999

# ============================================================================
# EXTERNAL INTEGRATIONS (Production)
# ============================================================================
GOOGLE_CLIENT_ID="your-production-google-client-id"
GOOGLE_CLIENT_SECRET="your-production-google-client-secret"

# WhatsApp Business API
WHATSAPP_ACCESS_TOKEN="your-production-whatsapp-token"
WHATSAPP_PHONE_NUMBER_ID="your-phone-number-id"

# SMS Gateway
SMS_API_KEY="your-production-sms-api-key"
SMS_SENDER_ID="NAKKSHA"

# ============================================================================
# FEATURE FLAGS (Production)
# ============================================================================
ENABLE_ANALYTICS=true
ENABLE_NOTIFICATIONS=true
ENABLE_FILE_UPLOAD=true
ENABLE_REAL_TIME=true

SWAGGER_ENABLED=false  # Disable in production
SWAGGER_PATH="/api/docs"

PRISMA_DEBUG=false
DATABASE_LOGGING=false

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================
# Railway/Render specific
RAILWAY_STATIC_URL=""
RAILWAY_PUBLIC_DOMAIN=""

# Health check configuration
HEALTH_CHECK_PATH="/health"
HEALTH_CHECK_INTERVAL=30000

# SSL Configuration
SSL_CERT_PATH=""
SSL_KEY_PATH=""
FORCE_HTTPS=true