# apps/api/.env
# Nakksha Consulting Platform - API Server Environment Configuration
# Copy this file and replace placeholder values with your actual credentials

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
NODE_ENV=development
PORT=8000
API_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000

# ============================================================================
# DATABASE CONFIGURATION (Neon PostgreSQL)
# ============================================================================
# Replace with your Neon connection string
DATABASE_URL="postgresql://neondb_owner:npg_Kv09uOPdxnwr@ep-frosty-pond-a15ycywc-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require"


# Database connection pool settings
DATABASE_CONNECTION_LIMIT=10
DATABASE_TIMEOUT=20000

# ============================================================================
# REDIS CONFIGURATION (Upstash)
# ============================================================================
# Replace with your Upstash Redis URL
REDIS_URL="redis://default:ATdaAAIjcDExY2RlYTA1YTJjMDU0MzA2OWQ5NzY5YTNiZjI3NmZhZnAxMA@chief-cicada-14170.upstash.io:6379"

# Redis session settings
REDIS_SESSION_TTL=86400
REDIS_CACHE_TTL=3600

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# Generate these using: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET="eb6adc716418ba4ac35bea6862ff8f6aa1288796feb207e8f121ed8a2e5e21f52770477cf1982287744382177a2a46ea6a328497eea461207d15b10f21c3e5b3"
JWT_REFRESH_SECRET="30771714b7b1b11b3edee3430813e5bfdaeeefc88114293f940d857545af6aa80255b770686747ca969f746ba545692c51818366d5e58f3a09d389383a80fc80"

# Token expiration times
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# ============================================================================
# EMAIL SERVICE CONFIGURATION (Resend)
# ============================================================================
# Replace with your Resend API key
RESEND_API_KEY="re_U2iKmwMC_A8MKp7sYgPkyzkqaj7Q75FvE"

# Email settings
FROM_EMAIL="noreply@yourdomain.com"
FROM_NAME="Nakksha Platform"
SUPPORT_EMAIL="support@yourdomain.com"

# Email template settings
EMAIL_TEMPLATE_PATH="./src/templates/emails"
EMAIL_VERIFICATION_URL="http://localhost:3000/verify-email"
PASSWORD_RESET_URL="http://localhost:3000/reset-password"

# ============================================================================
# FILE UPLOAD CONFIGURATION (Cloudinary)
# ============================================================================
# Replace with your Cloudinary credentials
CLOUDINARY_CLOUD_NAME="doj8cyfvh"
CLOUDINARY_API_KEY="833984683746641"
CLOUDINARY_API_SECRET="X_Bqi0-u4RPpYMfsCK65znaAqQI"

# Upload settings
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/webp,application/pdf"

# ============================================================================
# PAYMENT GATEWAY CONFIGURATION (Razorpay)
# ============================================================================
# Replace with your Razorpay keys
RAZORPAY_KEY_ID="rzp_test_xxxxxxxxxxxx"
RAZORPAY_KEY_SECRET="your-razorpay-secret"

# Payment settings
PAYMENT_SUCCESS_URL="http://localhost:3000/payment/success"
PAYMENT_FAILURE_URL="http://localhost:3000/payment/failure"
WEBHOOK_SECRET="your-webhook-secret"

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# Rate limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# CORS settings
CORS_ORIGIN="http://localhost:3000"
CORS_CREDENTIALS=true

# Session security
SESSION_SECURE=false  # Set to true in production
SESSION_SAME_SITE="lax"
COOKIE_DOMAIN="localhost"

# ============================================================================
# BACKGROUND JOBS CONFIGURATION
# ============================================================================
# Job processing settings
BULL_REDIS_HOST="xxx.upstash.io"
BULL_REDIS_PORT=6379
BULL_REDIS_PASSWORD="your-upstash-password"

# Job retry settings
JOB_MAX_ATTEMPTS=3
JOB_BACKOFF_DELAY=5000

# ============================================================================
# SOCKET.IO CONFIGURATION
# ============================================================================
SOCKET_CORS_ORIGIN="http://localhost:3000"
SOCKET_PATH="/socket.io"

# ============================================================================
# MONITORING & LOGGING
# ============================================================================
# Logging levels: error, warn, info, http, verbose, debug, silly
LOG_LEVEL="debug"
LOG_FORMAT="combined"

# Error tracking (optional - Sentry)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_ANALYTICS=true
ENABLE_NOTIFICATIONS=true
ENABLE_FILE_UPLOAD=true
ENABLE_REAL_TIME=true

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================
# API documentation
SWAGGER_ENABLED=true
SWAGGER_PATH="/api/docs"

# Database debugging
PRISMA_DEBUG=false
DATABASE_LOGGING=false

# ============================================================================
# BUSINESS LOGIC CONFIGURATION
# ============================================================================
# Admin approval settings
ADMIN_APPROVAL_REQUIRED=true
AUTO_APPROVE_CONSULTANTS=false

# Session settings
DEFAULT_SESSION_DURATION=60  # minutes
MAX_SESSION_DURATION=180     # minutes
SESSION_BUFFER_TIME=15       # minutes

# Quotation settings
QUOTATION_VALIDITY_DAYS=7
MAX_QUOTATION_ITEMS=10

# Subscription settings
FREE_PLAN_SESSION_LIMIT=5
PRO_PLAN_MONTHLY_PRICE=2999  # in paise (â‚¹29.99)

# ============================================================================
# EXTERNAL API KEYS (Optional)
# ============================================================================
# Google Calendar integration (optional)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# WhatsApp Business API (optional)
WHATSAPP_ACCESS_TOKEN=""
WHATSAPP_PHONE_NUMBER_ID=""

# SMS Gateway (optional)
SMS_API_KEY=""
SMS_SENDER_ID=""